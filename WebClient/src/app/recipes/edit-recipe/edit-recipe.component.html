<main role="main">

    <!-- <div class="container" style="padding-bottom: 30px">
      <div class="row">
        <div class="col-md-12">
          <div class="well well-lg">
            <div class="row">
              <div class="col-sm-12 text-center">
               <h1>- {{pageTitle}} -</h1>
               <h1 *ngIf="recipe">{{recipe.title}}</h1>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>
    </div> -->

    <div *ngIf="recipe" class="container">
      <div class="row">
        <div class="col-md-12">

          <div class="card">

            <div class="card-header text-center">
              <h3 *ngIf="recipe.title">Edit Recipe <br> <span style="font-style: italic">{{recipe.title}}</span></h3>
              <h3 *ngIf="!recipe.title">Create New Recipe</h3>
            </div>

            <div class="card-body">

              <form (ngSubmit)="saveForm()" [formGroup]="recipeForm">

                <div class="form-group">

                  <div class="row form-row">

                    <div class="col-md-2"></div>

                    <div class="col-md-3 text-center input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Producer:</span>
                      </div>
                        <select class="form-control" formControlName="producer" id="producerId">
                          <option value="" selected disabled hidden>Select Producer...</option>
                          <option value="Hello Fresh">Hello Fresh</option>
                          <option value="Home Chef">Home Chef</option>
                          <option value="Blue Apron">Blue Apron</option>
                        </select>
                    </div>

                    <div class="col-md-1"></div>

                    <div class="col-md-6 input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Title:</span>
                      </div>
                        <input type="text" id="titleId" class="form-control" formControlName="title">
                    </div>

                    <!-- <div class="col-md-2"></div> -->

                  </div>

                </div>

                <hr>

                <div class="form-group">
                  <div class="row">
                    <div class="col-md-12 text-center">
                      <h3>Ingredients</h3>
                    </div>
                    <br>
                    <div formArrayName="ingredients" *ngFor="let ingredient of ingredients.controls; let i = index" class="col-md-12">
                        <div [formGroupName]="i" class="row">
                          <div class="col-md-2"></div>
                          <div class="col-md-4 text-right input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text">Ingredient {{i+1}}: </span>
                            </div>
                            <input type="text" class="form-control" formControlName="name" id="{{'ingredient' + i}}" placeholder="Name of Ingredient">
                          </div>
                          <!-- <div class="col-md-1"></div> -->
                          <div class="col-md-4 text-center input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text">Amount: </span>
                            </div>
                            <input type="text" class="form-control" formControlName="amount" id="{{'amount' + i}}" placeholder="Amount of Ingredient">
                            <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeIngredient(i)">X</button>
                          </div>
                          <div class="col-md-2"></div>
                        </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-12 text-center">
                  <button type="button" class="btn btn-outline-success" (click)="addIngredient()">Add Ingredient</button>
                </div>

                <hr>

                <div class="form-group">
                  <div class="row">

                    <div class="col-md-12 text-center">
                      <h3>Steps</h3>
                    </div>

                    <div formArrayName="steps" *ngFor="let step of steps.controls; let i = index" class="col-md-12">
                      <div [formGroupName]="i" class="row form-row">

                        <div class="col-md-3"></div>
                        <div class="col-md-6">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text">Step {{i+1}} Name:</span>
                            </div>
                            <input class="form-control" type="text" formControlName="name" id="{{'stepname' + i}}">
                          </div>
                          <!-- <label for="{{'stepname' + i}}">Step {{i+1}} Name:</label> -->
                        </div>
                        <div class="col-md-3">
                          <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeStep(i)">Remove Step {{i+1}}</button>
                        </div>

                        <div class="col-md-12">
                          <!-- <label for="{{'stepbody' + i}}">Step {{i+1}} instructions:</label><br> -->
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text">Instructions:</span>
                            </div>
                            <textarea rows="2" class="form-control"
                                    formControlName="body" id="{{'stepbody' + i}}" placeholder="enter step {{i+1}} instructions here..."></textarea>

                          </div>
                        </div>

                      </div>
                      <br>
                    </div>

                  </div>
                </div>

                <div class="col-md-12 text-center">
                  <button type="button" class="btn btn-outline-success" (click)="addStep()">Add Step</button>
                </div>

                <hr>

                <div class="col-md-12 text-center">
                   <h3>Nurtitional Information</h3>
                </div>

                <div formGroupName="nutrition">
                <!-- <div class="row"> -->

                  <div class="form-group">
                    <div class="form-row">

                      <div *ngIf="this.recipeProducer === 'Blue Apron'" class="col-md-4"></div>
                      <div [ngClass]="{'col-md-3': this.recipeProducer !== 'Blue Apron', 'col-md-4': this.recipeProducer === 'Blue Apron'}"
                            class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Calories:</span>
                        </div>
                        <input formControlName="calories" type="number" id="caloriesId" class="form-control">
                      </div>
                      <div *ngIf="this.recipeProducer === 'Blue Apron'" class="col-md-4"></div>

                      <div *ngIf="this.recipeProducer !== 'Blue Apron'" class="col-md-3 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Fat:</span>
                        </div>
                        <input formControlName="fat" type="number" id="fatId" class="form-control">
                      </div>
                      <div *ngIf="this.recipeProducer !== 'Blue Apron'" class="col-md-3 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Carbs:</span>
                        </div>
                        <input formControlName="carbohydrate" type="number" id="carbsId" class="form-control">
                      </div>
                      <div *ngIf="this.recipeProducer !== 'Blue Apron'" class="col-md-3 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Protein:</span>
                        </div>
                        <input formControlName="protein" type="number" id="proteinId" class="form-control">
                      </div>

                    </div>
                  </div>

                  <div *ngIf="this.recipeProducer === 'Hello Fresh'" class="form-group">
                    <div class="form-row">

                      <div class="col-md-3 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Sugar:</span>
                        </div>
                        <input formControlName="sugar" type="number" id="sugarId" class="form-control">
                      </div>
                      <div class="col-md-3 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Saturated Fat:</span>
                        </div>
                        <input formControlName="saturatedFat" type="number" id="satfatId" class="form-control">
                      </div>
                      <div class="col-md-3 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Cholesterol:</span>
                        </div>
                        <input formControlName="cholesterol" type="number" id="cholId" class="form-control">
                      </div>
                      <div class="col-md-3 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Fiber:</span>
                        </div>
                        <input formControlName="fiber" type="number" id="fiberId" class="form-control">
                      </div>

                    </div>
                  </div>

                  <div *ngIf="this.recipeProducer !== 'Blue Apron'" class="form-group">
                    <div class="row form-row">

                      <div class="col-md-4"></div>
                      <div class="col-md-3 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Sodium:</span>
                        </div>
                        <input formControlName="sodium" type="number" id="sodiumId" class="form-control">
                      </div>
                      <div class="col-md-5"></div>

                    </div>
                  </div>

              </div> <!-- end of nutrition form group div -->

                  <hr>
                  <div class="form-group">
                    <div class="row form-row">

                      <div class="col-md-12 input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Image URL:</span>
                        </div>
                        <input style="text-align: left !important" formControlName="imgDir" type="text" id="imgId" class="form-control">
                      </div>
                      <br>
                      <div class="col-md-12">
                        <div class="row">
                        <div class="col-md-4"></div>
                        <div class="col-md-4 text-center">
                          <label style="font-style: italic" for="imageId">Image Preview</label>
                          <img style="width: 100%" id="imageId" src="{{imageDir}}">
                        </div>
                        <div class="col-md-4"></div>
                        </div>
                      </div>

                    </div>
                  </div>

                <!-- </div> -->

                <!-- <div class="form-group">
                  <br>
                  <button type="submit" class="btn btn-primary">Submit</button>
                </div> -->

              </form>

            </div><!-- end of card body -->
            <div class="card-footer text-right">
              <button *ngIf="recipe.title" type="button" class="btn btn-primary" (click)="saveForm()">Save Changes</button>
              <button *ngIf="!recipe.title" type="button" class="btn btn-primary" (click)="saveForm()">Create</button>
            </div>
          </div> <!-- end of card -->

        </div> <!-- end of first col-md-12 -->
      </div> <!-- end of first row -->
    </div> <!-- end of container -->

</main>
